(window.webpackJsonpmax_code_project=window.webpackJsonpmax_code_project||[]).push([[0],{114:function(e,t,n){e.exports=n(243)},235:function(e,t,n){},236:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(23),i=n(17),o=n(24),s=n(112),u=n(14),l=n.n(u),f=n(27),d=n(28),p=n(99),m=n.n(p),h="https://music.musicaudience.info",v=function(e){return{type:"SET_PROCESSING",processing:e}},E=n(80),b=function(e){return{type:"GET_API",action:e}},O=function(e,t){if(Array.isArray(t))return Object.entries(e).filter(function(e){var n=Object(E.a)(e,1)[0];return!t.includes(n)}).reduce(function(e,t){var n=Object(E.a)(t,2),r=n[0],a=n[1];return Object.assign(e,Object(d.a)({},r,a))},{});throw new Error("blacklist needs to be an array")},j=function(e){var t=e.replace(/^\??/,"").split("="),n={};if(e){for(var r=0;r<t.length;r+=2){var a=t[r],c=t[r+1];g(c)&&(c="true"===c.toLowerCase()),n[a]=c}return n}return!1},g=function(e){return"true"===e.toLowerCase()||"false"===e.toLowerCase()};function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S=m.a.ajax,T=Object({NODE_ENV:"production",PUBLIC_URL:"/max_code_project"}).REACT_APP_API_URL||"",A=function(e){return new Promise(function(t,n){var r=Object.assign({},e.params,{headers:{Authorization:"apikey f044f26d5e5c4fc185d9a73c0e41"}});(function(e,t){return S(T+e,t,function(e){return e})})(e.ep,r).then(function(e){t(e)},function(e){throw n(e),new Error(e)})})};var R=l.a.mark(function e(t){var n,r,a,c,i,o=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:f.b,e.next=3,Object(f.c)(v(!0));case 3:return c=t.action.container||"response",i=O(t.action,["type","ep","params"]),e.prev=4,e.next=7,n(A,t.action);case 7:r=e.sent,t.action.errorCondition&&"function"===typeof t.action.errorCondition&&t.action.errorCondition(r)&&(a=t.action.errorType||"UNSPECIFIED_ERROR"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),r=e.t0.responseJSON,a=t.action.errorType||"UNSPECIFIED_ERROR",console.error("There was an error fetching: ",r);case 16:return e.next=18,Object(f.c)(w(Object(d.a)({type:a||t.action.type,errorFor:t.action.errorFor||null},c,r),i));case 18:return e.next=20,Object(f.c)(v(!1));case 20:case"end":return e.stop()}},e,null,[[4,11]])}),_=l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.d)("GET_API",R);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error("There was an error: ",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}),D=function(e){return{type:"REMOVE_FAVORITE",artist:e}},N=function(e){return{type:"ADD_FAVORITE",artist:e}},I=function(e){return{type:"SET_FAVORITES",favorites:e}},C=l.a.mark(F),k=l.a.mark(G),x=l.a.mark(V);function F(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!sessionStorage||!sessionStorage.reportEvents){e.next=3;break}return e.next=3,Object(f.d)("*",l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}},e)}));case 3:case"end":return e.stop()}},C)}function G(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)(I(sessionStorage&&sessionStorage.favorites));case 2:case"end":return e.stop()}},k)}function V(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([F(),_(),G()]);case 2:case"end":return e.stop()}},x)}var P=function(e){var t="/api/v1/music/genres/<id>/artists".replace("<id>",e);return{ep:"".concat(h).concat(t),params:{method:"GET"},type:J,container:"response",artistID:e}},L=function(e){var t="/api/v1/music/artists/<id>".replace("<id>",e);return{ep:"".concat(h).concat(t),params:{method:"GET"},type:B,container:"response",artistID:e}},U="DATA_RECEIVED",J="ARTISTS_RECEIVED",B="ARTIST_RECEIVED",M={selected:null,entered:"",genres:[],cache:{},artists:[]},W=function(e,t){var n=t.response.data;return Object.assign({},e,{artists:n})},X=function(e,t){var n=t.selected;return e.selected!==n?Object.assign({},e,{selected:n}):e},Y=function(e,t){var n=t.value,r=e.cache[n];return Object.assign({},e,{genres:r})},q=function(e,t){var n=t.response.data,r=Object.assign({},e.cache,Object(d.a)({},t.value,n));return Object.assign({},e,{genres:n,cache:r})},z=function(e,t){var n=t.value;return n!==e.entered?Object.assign({},e,{entered:n}):e},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TEXT_ENTERED":return z(e,t);case U:return q(e,t);case J:return W(e,t);case"SET_GENRES":return Y(e,t);case"SET_SELECTED":return X(e,t);default:return e}},H={artist:null,cache:{}},Q=function(e,t){var n=t.id,r=e.cache[n];return r?Object.assign({},e,{artist:r}):e},Z=function(e,t){return H},$=function(e,t){var n=t.response.data[0],r=n.id;return e.cache[r]=n,Object.assign({},e,{artist:n})},ee=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:H,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case B:return $(e,t);case"CLEAR_ARTIST":return Z(e,t);case"GET_ARTIST":return Q(e,t);default:return e}},te={favorites:{}},ne=function(e){try{var t=JSON.stringify(e);sessionStorage.favorites=t}catch(n){throw new Error("There was an error saving your favorites: "+n)}},re=function(e,t){var n=t.favorites;if(n){try{n=JSON.parse(n)}catch(r){throw new Error("There was an error getting your favorites: "+r)}return Object.assign({},e,{favorites:n})}return e},ae=function(e,t){var n=t.artist;return e.favorites[n.id]?e:(e.favorites[n.id]=n,ne(e.favorites),Object.assign({},e))},ce=function(e,t){var n=t.artist.id;return e.favorites[n]?(delete e.favorites[n],ne(e.favorites),Object.assign({},e)):e},ie=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITE":return ae(e,t);case"REMOVE_FAVORITE":return ce(e,t);case"SET_FAVORITES":return re(e,t);default:return e}},oe=Object(o.combineReducers)({Search:K,Detail:ee,Saved:ie}),se=(n(124),n(37)),ue=n(38),le=n(40),fe=n(39),de=n(41),pe=n(25),me=n(110),he=n(244),ve=n(245),Ee=n(77),be=n(78),Oe=n.n(be),je=(n(235),function(e){function t(){return Object(se.a)(this,t),Object(le.a)(this,Object(fe.a)(t).apply(this,arguments))}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"render",value:function(){var e=this.props,t=e.artist,n=e.isFavorite,r=e.handleAddFavorite,c=e.handleRemoveFavorite,i=function(){n?c(t):r(t)};return n?a.a.createElement(ve.a,{className:"favorite",title:"I am a favorite",onClick:i,variant:"primary"},a.a.createElement(Ee.a,{icon:Oe.a})):a.a.createElement(ve.a,{title:"I am NOT a favorite",onClick:i,variant:"primary"},a.a.createElement(Ee.a,{icon:Oe.a}))}}]),t}(r.Component)),ge=function(e,t){return e.Saved.favorites[t.artist.id]},ye=Object(i.b)(function(e,t){return{isFavorite:ge(e,t)}},function(e){return{handleRemoveFavorite:function(t){e(D(t))},handleAddFavorite:function(t){e(N(t))}}})(je),we=(n(236),function(e){if(e.artist){var t,n=e.artist,r=e.showAllGenres,c=e.handleDetailView,i=n.name,o=n.image,s=n.genres,u=n.id,l=n.popularity,f=null,d=null,p=null,m=s.filter(function(e){return e.is_primary}),h=null;if(m&&m.length&&(h=m[0].name),r)f=s.map(function(e){return e.name}).filter(function(e){return e!==h}).join(", "),d=a.a.createElement(he.a.Text,null,"Popularity: ",l),p=f?a.a.createElement(he.a.Text,null,"Additional Genres: ",f):null;return t=c?a.a.createElement(he.a.Title,null,a.a.createElement(pe.b,{to:"/detail/"+u},a.a.createElement("span",{className:"view"},i))):a.a.createElement(he.a.Title,null,a.a.createElement("span",{className:"view no-link"},i)),a.a.createElement(he.a,{key:u},a.a.createElement(he.a.Img,{variant:"top",src:o}),a.a.createElement(he.a.Body,null,t,a.a.createElement(he.a.Text,null,"Primary Genre:",a.a.createElement("br",null),a.a.createElement("span",{className:"primary-genre"},h)),p,d,a.a.createElement(ye,{artist:n})))}return null}),Se=(n(238),function(e){function t(e){var n;Object(se.a)(this,t),n=Object(le.a)(this,Object(fe.a)(t).call(this,e));var r=e.location,a=j(r.search);return a.id&&!n.props.artists.length&&n.props.handleGetSelected(a.id),n}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"addSearch",value:function(e){if(e&&e[0]&&e[0].id){var t=e[0].id;this.props.history.push({pathname:"/",search:"?id=".concat(t)})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleChange,r=t.genres,c=t.cache,i=t.handleSetSelected,o=t.artists,s=t.handleDetailView,u=t.selectedGenre,l=o&&o.length?o.map(function(e){return a.a.createElement("div",{className:"col",key:e.id},a.a.createElement(we,{artist:e,handleDetailView:s}))}):null,f=u?a.a.createElement("span",null,"You have selected the ",a.a.createElement("em",null,u)," genre"):null;return a.a.createElement("div",{className:"search col-sm"},a.a.createElement("h1",null,"Search"),a.a.createElement("nav",null,a.a.createElement(pe.b,{className:"favorites-link",to:"/saved"},"View Favorites")),a.a.createElement("div",{className:"search-input"},a.a.createElement("label",null,"Enter a term to search for music genres"),a.a.createElement(me.a,{labelKey:"name",onChange:function(t){i(t),e.addSearch(t)},onInputChange:function(e){return n(c,e)},options:r,id:"typeAheadID"})),a.a.createElement("div",{className:"selected-genre"},f),a.a.createElement("div",{className:"search-results"},a.a.createElement("div",{className:"artists"},l)))}}]),t}(r.Component)),Te=function(e){return e.Search.entered},Ae=function(e){return e.Search.cache[e.Search.entered]||[]},Re=function(e){return e.Search.cache},_e=function(e){return e.Search.artists},De=function(e){return e.Search.selected&&e.Search.selected.name},Ne=Object(i.b)(function(e){return{entered:Te(e),genres:Ae(e),cache:Re(e),artists:_e(e),selectedGenre:De(e)}},function(e){return{handleGetSelected:function(t){t&&e(b(P(t)))},handleSetSelected:function(t){if(t&&Array.isArray(t)&&t.length){var n=t[0],r=t[0].id;n&&r&&(e(function(e){return{type:"SET_SELECTED",selected:e}}(n)),e(b(P(r))))}},handleChange:function(t,n){e(function(e){return{type:"TEXT_ENTERED",value:e}}(n)),!function(e,t){return!!e[t]}(t,n)?e(b(function(e){return{ep:"".concat(h).concat("/api/v1/music/genres"),params:{data:{q:e,limit:5},method:"GET"},type:U,container:"response",value:e}}(n))):e(function(e){return{type:"SET_GENRES",value:e}}(n))},handleDetailView:function(t){e(b(L(t)))}}})(Se),Ie=function(e){return e.Search.selected},Ce=Object(i.b)(function(e){return{genre:Ie(e)}},function(e){return{}})(function(e){var t=e.genre,n=t&&t.id,r=n?"/?id="+n:"/";return a.a.createElement(pe.b,{to:r},"Back to Search")}),ke=(n(239),function(e){function t(e){var n;if(Object(se.a)(this,t),n=Object(le.a)(this,Object(fe.a)(t).call(this,e)),!(e.match&&e.match.params&&e.match.params.id))throw new Error("No artist id was supplied!");var r=e.match.params.id;return e.cache[r]?e.handleGetArtistFromCache(r):e.handleGetArtist(r),n}return Object(de.a)(t,e),Object(ue.a)(t,[{key:"componentWillUnmount",value:function(){this.props.handleClearArtist()}},{key:"render",value:function(){var e=this.props.artist;return e?a.a.createElement("div",{className:"detail"},a.a.createElement("h1",null,"Details"),a.a.createElement("nav",null,a.a.createElement(Ce,null),"\xa0|\xa0",a.a.createElement(pe.b,{className:"favorites-link",to:"/saved"},"View Favorites")),a.a.createElement("div",{className:"search-results"},a.a.createElement(we,{artist:e,showAllGenres:!0}))):null}}]),t}(r.Component)),xe=function(e){return e.Detail.artist},Fe=function(e){return e.Detail.cache},Ge=Object(i.b)(function(e){return{artist:xe(e),cache:Fe(e)}},function(e){return{handleGetArtist:function(t){e(b(L(t)))},handleClearArtist:function(){e({type:"CLEAR_ARTIST"})},handleGetArtistFromCache:function(t){e(function(e){return{type:"GET_ARTIST",id:e}}(t))}}})(ke),Ve=(n(240),function(e){return Object.values(function(e){return e.Saved.favorites}(e))}),Pe=Object(i.b)(function(e){return{favoriteArtists:Ve(e)}},function(e){return{handleRemoveFavorite:function(t){e(D(t))},handleAddFavorite:function(t){e(N(t))},handleDetailView:function(t){e(b(L(t)))}}})(function(e){var t,n=e.favoriteArtists,r=e.handleDetailView;return(t=n.map(function(e){return a.a.createElement(we,{key:e.id,artist:e,handleDetailView:r})}))&&0===t.length&&(t=a.a.createElement("span",null,"You have no saved favorites")),a.a.createElement("div",{className:"saved"},a.a.createElement("h1",null,"Favorites"),a.a.createElement("nav",null,a.a.createElement(Ce,null)),a.a.createElement("div",{className:"search-results"},a.a.createElement("div",{className:"artists"},t)))}),Le=n(32),Ue=(n(241),function(){return a.a.createElement("div",{className:"component"},a.a.createElement(pe.a,{basename:"/"},a.a.createElement(Le.c,null,a.a.createElement(Le.a,{path:"/saved",exact:!0,component:Pe}),a.a.createElement(Le.a,{path:"/detail/:id",exact:!0,component:Ge}),a.a.createElement(Le.a,{path:"/:id?",exact:!0,component:Ne}))))});var Je=function(){return a.a.createElement("div",{className:"App container"},a.a.createElement(Ue,null))},Be=n(109),Me=(n(242),Object(s.a)()),We=Object(o.createStore)(oe,Object(Be.composeWithDevTools)(Object(o.applyMiddleware)(Me)));Me.run(V),Object(c.render)(a.a.createElement(i.a,{store:We},a.a.createElement(Je,null)),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.8c960cd4.chunk.js.map