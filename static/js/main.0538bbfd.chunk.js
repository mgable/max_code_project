(window.webpackJsonpmax_code_project=window.webpackJsonpmax_code_project||[]).push([[0],{114:function(e,t,n){e.exports=n(243)},235:function(e,t,n){},236:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(23),i=n(17),s=n(24),o=n(112),u=n(14),l=n.n(u),f=n(27),d=n(28),m=n(99),p=n.n(m),h="https://music.musicaudience.info",v=function(e){return{type:"SET_PROCESSING",processing:e}},E=n(80),b=function(e){return{type:"GET_API",action:e}},O=function(e,t){if(Array.isArray(t))return Object.entries(e).filter(function(e){var n=Object(E.a)(e,1)[0];return!t.includes(n)}).reduce(function(e,t){var n=Object(E.a)(t,2),r=n[0],a=n[1];return Object.assign(e,Object(d.a)({},r,a))},{});throw new Error("blacklist needs to be an array")},j=function(e){var t=e.replace(/^\??/,"").split("="),n={};if(e){for(var r=0;r<t.length;r+=2){var a=t[r],c=t[r+1];y(c)&&(c="true"===c.toLowerCase()),n[a]=c}return n}return!1},y=function(e){return"true"===e.toLowerCase()||"false"===e.toLowerCase()};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var w=p.a.ajax,T=Object({NODE_ENV:"production",PUBLIC_URL:"/max_code_project"}).REACT_APP_API_URL||"",A=function(e){return new Promise(function(t,n){var r=Object.assign({},e.params,{headers:{Authorization:"apikey f044f26d5e5c4fc185d9a73c0e41"}});(function(e,t){return w(T+e,t,function(e){return e})})(e.ep,r).then(function(e){t(e)},function(e){throw n(e),new Error(e)})})};var R=l.a.mark(function e(t){var n,r,a,c,i,s=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:f.b,e.next=3,Object(f.c)(v(!0));case 3:return c=t.action.container||"response",i=O(t.action,["type","ep","params"]),e.prev=4,e.next=7,n(A,t.action);case 7:r=e.sent,t.action.errorCondition&&"function"===typeof t.action.errorCondition&&t.action.errorCondition(r)&&(a=t.action.errorType||"UNSPECIFIED_ERROR"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),r=e.t0.responseJSON,a=t.action.errorType||"UNSPECIFIED_ERROR",console.error("There was an error fetching: ",r);case 16:return e.next=18,Object(f.c)(S(Object(d.a)({type:a||t.action.type,errorFor:t.action.errorFor||null},c,r),i));case 18:return e.next=20,Object(f.c)(v(!1));case 20:case"end":return e.stop()}},e,null,[[4,11]])}),I=l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.d)("GET_API",R);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error("There was an error: ",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}),D=function(e){return{type:"REMOVE_FAVORITE",artist:e}},_=function(e){return{type:"ADD_FAVORITE",artist:e}},C=function(e){return{type:"SET_FAVORITES",favorites:e}},N=l.a.mark(x),k=l.a.mark(F),G=l.a.mark(V);function x(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!sessionStorage||!sessionStorage.reportEvents){e.next=3;break}return e.next=3,Object(f.d)("*",l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}},e)}));case 3:case"end":return e.stop()}},N)}function F(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)(C(sessionStorage&&sessionStorage.favorites));case 2:case"end":return e.stop()}},k)}function V(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([x(),I(),F()]);case 2:case"end":return e.stop()}},G)}var P=function(e){var t="/api/v1/music/genres/<id>/artists".replace("<id>",e);return{ep:"".concat(h).concat(t),params:{method:"GET"},type:U,container:"response",artistID:e}},L=function(e){var t="/api/v1/music/artists/<id>".replace("<id>",e);return{ep:"".concat(h).concat(t),params:{method:"GET"},type:J,container:"response",artistID:e}},M="DATA_RECEIVED",U="ARTISTS_RECEIVED",J="ARTIST_RECEIVED",B="SIMILAR_RECEIVED",W={selected:null,entered:"",genres:[],cache:{},artists:[]},X=function(e,t){var n=t.response.data;return Object.assign({},e,{artists:n})},Y=function(e,t){var n=t.selected;return e.selected!==n?Object.assign({},e,{selected:n}):e},q=function(e,t){var n=t.value,r=e.cache[n];return Object.assign({},e,{genres:r})},z=function(e,t){var n=t.response.data,r=Object.assign({},e.cache,Object(d.a)({},t.value,n));return Object.assign({},e,{genres:n,cache:r})},K=function(e,t){var n=t.value;return n!==e.entered?Object.assign({},e,{entered:n}):e},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:W,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TEXT_ENTERED":return K(e,t);case M:return z(e,t);case U:return X(e,t);case"SET_GENRES":return q(e,t);case"SET_SELECTED":return Y(e,t);default:return e}},Q={artist:null,similar:[],cache:{},similarCache:{}},Z=function(e,t){var n=t.id,r=e.similarCache[n];return Object.assign({},e,{similar:r})},$=function(e,t){var n=t.response.data,r=t.artistID;return e.similarCache[r]=n,Object.assign({},e,{similar:n})},ee=function(e,t){var n=t.id,r=e.cache[n];return r?Object.assign({},e,{artist:r}):e},te=function(e,t){return Q},ne=function(e,t){var n=t.response.data[0],r=n.id;return e.cache[r]=n,Object.assign({},e,{artist:n})},re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Q,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return ne(e,t);case"CLEAR_ARTIST":return te(e,t);case"GET_ARTIST":return ee(e,t);case B:return $(e,t);case"GET_SIMILAR":return Z(e,t);default:return e}},ae={favorites:{}},ce=function(e){try{var t=JSON.stringify(e);sessionStorage.favorites=t}catch(n){throw new Error("There was an error saving your favorites: "+n)}},ie=function(e,t){var n=t.favorites;if(n){try{n=JSON.parse(n)}catch(r){throw new Error("There was an error getting your favorites: "+r)}return Object.assign({},e,{favorites:n})}return e},se=function(e,t){var n=t.artist;return e.favorites[n.id]?e:(e.favorites[n.id]=n,ce(e.favorites),Object.assign({},e))},oe=function(e,t){var n=t.artist.id;return e.favorites[n]?(delete e.favorites[n],ce(e.favorites),Object.assign({},e)):e},ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ae,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITE":return se(e,t);case"REMOVE_FAVORITE":return oe(e,t);case"SET_FAVORITES":return ie(e,t);default:return e}},le=Object(s.combineReducers)({Search:H,Detail:re,Saved:ue}),fe=(n(124),n(37)),de=n(38),me=n(40),pe=n(39),he=n(41),ve=n(25),Ee=n(110),be=n(244),Oe=n(245),je=n(77),ye=n(78),ge=n.n(ye),Se=(n(235),function(e){function t(){return Object(fe.a)(this,t),Object(me.a)(this,Object(pe.a)(t).apply(this,arguments))}return Object(he.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props,t=e.artist,n=e.isFavorite,r=e.handleAddFavorite,c=e.handleRemoveFavorite,i=function(){n?c(t):r(t)};return n?a.a.createElement(Oe.a,{className:"favorite",title:"I am a favorite",onClick:i,variant:"primary"},a.a.createElement(je.a,{icon:ge.a})):a.a.createElement(Oe.a,{title:"I am NOT a favorite",onClick:i,variant:"primary"},a.a.createElement(je.a,{icon:ge.a}))}}]),t}(r.Component)),we=function(e,t){return e.Saved.favorites[t.artist.id]},Te=Object(i.b)(function(e,t){return{isFavorite:we(e,t)}},function(e){return{handleRemoveFavorite:function(t){e(D(t))},handleAddFavorite:function(t){e(_(t))}}})(Se),Ae=(n(236),function(e){if(e.artist){var t,n=e.artist,r=e.showAllGenres,c=e.handleDetailView,i=n.name,s=n.image,o=n.genres,u=n.id,l=n.popularity,f=null,d=null,m=null,p=o.filter(function(e){return e.is_primary}),h=null;if(p&&p.length&&(h=p[0].name),r)f=o.map(function(e){return e.name}).filter(function(e){return e!==h}).join(", "),d=a.a.createElement(be.a.Text,null,"Popularity: ",l),m=f?a.a.createElement(be.a.Text,null,"Additional Genres: ",f):null;return t=c?a.a.createElement(be.a.Title,null,a.a.createElement(ve.b,{to:"/detail/"+u},a.a.createElement("span",{className:"view"},i))):a.a.createElement(be.a.Title,null,a.a.createElement("span",{className:"view no-link"},i)),a.a.createElement(be.a,{key:u},a.a.createElement(be.a.Img,{variant:"top",src:s}),a.a.createElement(be.a.Body,null,t,a.a.createElement(be.a.Text,null,"Primary Genre:",a.a.createElement("br",null),a.a.createElement("span",{className:"primary-genre"},h)),m,d,a.a.createElement(Te,{artist:n})))}return null}),Re=(n(238),function(e){function t(e){var n;Object(fe.a)(this,t),n=Object(me.a)(this,Object(pe.a)(t).call(this,e));var r=e.location,a=j(r.search);return a.id&&!n.props.artists.length&&n.props.handleGetSelected(a.id),n}return Object(he.a)(t,e),Object(de.a)(t,[{key:"addSearch",value:function(e){if(e&&e[0]&&e[0].id){var t=e[0].id;this.props.history.push({pathname:"/",search:"?id=".concat(t)})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleChange,r=t.genres,c=t.cache,i=t.handleSetSelected,s=t.artists,o=t.handleDetailView,u=t.selectedGenre,l=s&&s.length?s.map(function(e){return a.a.createElement("div",{className:"col",key:e.id},a.a.createElement(Ae,{artist:e,handleDetailView:o}))}):null,f=u?a.a.createElement("span",null,"You have selected the ",a.a.createElement("em",null,u)," genre"):null;return a.a.createElement("div",{className:"search col-sm"},a.a.createElement("h1",null,"Search"),a.a.createElement("nav",null,a.a.createElement(ve.b,{className:"favorites-link",to:"/saved"},"View Favorites")),a.a.createElement("div",{className:"search-input"},a.a.createElement("label",null,"Enter a term to search for music genres"),a.a.createElement(Ee.a,{labelKey:"name",onChange:function(t){i(t),e.addSearch(t)},onInputChange:function(e){return n(c,e)},options:r,id:"typeAheadID"})),a.a.createElement("div",{className:"selected-genre"},f),a.a.createElement("div",{className:"search-results"},a.a.createElement("div",{className:"artists"},l)))}}]),t}(r.Component)),Ie=function(e){return e.Search.entered},De=function(e){return e.Search.cache[e.Search.entered]||[]},_e=function(e){return e.Search.cache},Ce=function(e){return e.Search.artists},Ne=function(e){return e.Search.selected&&e.Search.selected.name},ke=Object(i.b)(function(e){return{entered:Ie(e),genres:De(e),cache:_e(e),artists:Ce(e),selectedGenre:Ne(e)}},function(e){return{handleGetSelected:function(t){t&&e(b(P(t)))},handleSetSelected:function(t){if(t&&Array.isArray(t)&&t.length){var n=t[0],r=t[0].id;n&&r&&(e(function(e){return{type:"SET_SELECTED",selected:e}}(n)),e(b(P(r))))}},handleChange:function(t,n){e(function(e){return{type:"TEXT_ENTERED",value:e}}(n)),!function(e,t){return!!e[t]}(t,n)?e(b(function(e){return{ep:"".concat(h).concat("/api/v1/music/genres"),params:{data:{q:e,limit:5},method:"GET"},type:M,container:"response",value:e}}(n))):e(function(e){return{type:"SET_GENRES",value:e}}(n))},handleDetailView:function(t){e(b(L(t)))}}})(Re),Ge=function(e){return e.Search.selected},xe=Object(i.b)(function(e){return{genre:Ge(e)}},function(e){return{}})(function(e){var t=e.genre,n=t&&t.id,r=n?"/?id="+n:"/";return a.a.createElement(ve.b,{to:r},"Back to Search")}),Fe=(n(239),function(e){function t(e){var n;if(Object(fe.a)(this,t),n=Object(me.a)(this,Object(pe.a)(t).call(this,e)),!(e.match&&e.match.params&&e.match.params.id))throw new Error("No artist id was supplied!");var r=e.match.params.id;return e.cache[r]?(e.handleGetArtistFromCache(r),e.handleGetSimiliarFromCache(r)):(e.handleGetArtist(r),e.handleGetSimiliar(r)),n}return Object(he.a)(t,e),Object(de.a)(t,[{key:"componentWillUnmount",value:function(){this.props.handleClearArtist()}},{key:"render",value:function(){var e=this.props.artist,t=this.props.similar.map(function(e){return a.a.createElement(Ae,{key:e.id,artist:e})});return e?a.a.createElement("div",{className:"details"},a.a.createElement("h1",null,"Details"),a.a.createElement("nav",null,a.a.createElement(xe,null),"\xa0|\xa0",a.a.createElement(ve.b,{className:"favorites-link",to:"/saved"},"View Favorites")),a.a.createElement("div",{className:"row"},a.a.createElement("div",{className:"detail col-sm-6"},a.a.createElement("div",{className:"search-results"},a.a.createElement(Ae,{artist:e,showAllGenres:!0}))),a.a.createElement("div",{className:"related col-sm-6"},a.a.createElement("div",{className:"artists"},a.a.createElement("h4",null,"Related Artists"),t)))):null}}]),t}(r.Component)),Ve=function(e){return e.Detail.artist},Pe=function(e){return e.Detail.cache},Le=function(e){return e.Detail.similar.filter(function(t){return t.id!==function(e){return e.Detail.artist&&e.Detail.artist.id}(e)})},Me=Object(i.b)(function(e){return{artist:Ve(e),similar:Le(e),cache:Pe(e)}},function(e){return{handleGetSimiliar:function(t){e(b(function(e){var t="/api/v1/music/artists/<id>/similar".replace("<id>",e);return{ep:"".concat(h).concat(t),params:{method:"GET"},type:B,container:"response",artistID:e}}(t)))},handleGetSimiliarFromCache:function(t){e(function(e){return{type:"GET_SIMILAR",id:e}}(t))},handleGetArtist:function(t){e(b(L(t)))},handleClearArtist:function(){e({type:"CLEAR_ARTIST"})},handleGetArtistFromCache:function(t){e(function(e){return{type:"GET_ARTIST",id:e}}(t))}}})(Fe),Ue=(n(240),function(e){return Object.values(function(e){return e.Saved.favorites}(e))}),Je=Object(i.b)(function(e){return{favoriteArtists:Ue(e)}},function(e){return{handleRemoveFavorite:function(t){e(D(t))},handleAddFavorite:function(t){e(_(t))},handleDetailView:function(t){e(b(L(t)))}}})(function(e){var t,n=e.favoriteArtists,r=e.handleDetailView;return(t=n.map(function(e){return a.a.createElement(Ae,{key:e.id,artist:e,handleDetailView:r})}))&&0===t.length&&(t=a.a.createElement("span",null,"You have no saved favorites")),a.a.createElement("div",{className:"saved"},a.a.createElement("h1",null,"Favorites"),a.a.createElement("nav",null,a.a.createElement(xe,null)),a.a.createElement("div",{className:"search-results"},a.a.createElement("div",{className:"artists"},t)))}),Be=n(32),We=(n(241),function(){return a.a.createElement("div",{className:"component"},a.a.createElement(ve.a,{basename:"/"},a.a.createElement(Be.c,null,a.a.createElement(Be.a,{path:"/saved",exact:!0,component:Je}),a.a.createElement(Be.a,{path:"/detail/:id",exact:!0,component:Me}),a.a.createElement(Be.a,{path:"/:id?",exact:!0,component:ke}))))});var Xe=function(){return a.a.createElement("div",{className:"App container"},a.a.createElement(We,null))},Ye=n(109),qe=(n(242),Object(o.a)()),ze=Object(s.createStore)(le,Object(Ye.composeWithDevTools)(Object(s.applyMiddleware)(qe)));qe.run(V),Object(c.render)(a.a.createElement(i.a,{store:ze},a.a.createElement(Xe,null)),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.0538bbfd.chunk.js.map