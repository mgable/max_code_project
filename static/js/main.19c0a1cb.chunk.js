(window.webpackJsonpmax_code_project=window.webpackJsonpmax_code_project||[]).push([[0],{114:function(e,t,n){e.exports=n(243)},235:function(e,t,n){},236:function(e,t,n){},238:function(e,t,n){},239:function(e,t,n){},240:function(e,t,n){},241:function(e,t,n){},242:function(e,t,n){},243:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),c=n(23),i=n(17),o=n(24),s=n(112),u=n(14),l=n.n(u),f=n(27),d=n(28),p=n(99),m=n.n(p),v="https://music.musicaudience.info",h=function(e){return{type:"SET_PROCESSING",processing:e}},E=n(80),b=function(e){return{type:"GET_API",action:e}},O=function(e,t){if(Array.isArray(t))return Object.entries(e).filter(function(e){var n=Object(E.a)(e,1)[0];return!t.includes(n)}).reduce(function(e,t){var n=Object(E.a)(t,2),r=n[0],a=n[1];return Object.assign(e,Object(d.a)({},r,a))},{});throw new Error("blacklist needs to be an array")},j=function(e){var t=e.replace(/^\??/,"").split("="),n={};if(e){for(var r=0;r<t.length;r+=2){var a=t[r],c=t[r+1];y(c)&&(c="true"===c.toLowerCase()),n[a]=c}return n}return!1},y=function(e){return"true"===e.toLowerCase()||"false"===e.toLowerCase()};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(n,!0).forEach(function(t){Object(d.a)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(n).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}var S=m.a.ajax,T=Object({NODE_ENV:"production",PUBLIC_URL:"/max_code_project"}).REACT_APP_API_URL||"",A=function(e){return new Promise(function(t,n){var r=Object.assign({},e.params,{headers:{Authorization:"apikey f044f26d5e5c4fc185d9a73c0e41"}});(function(e,t){return S(T+e,t,function(e){return e})})(e.ep,r).then(function(e){t(e)},function(e){throw n(e),new Error(e)})})};var R=l.a.mark(function e(t){var n,r,a,c,i,o=arguments;return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=o.length>1&&void 0!==o[1]?o[1]:f.b,e.next=3,Object(f.c)(h(!0));case 3:return c=t.action.container||"response",i=O(t.action,["type","ep","params"]),e.prev=4,e.next=7,n(A,t.action);case 7:r=e.sent,t.action.errorCondition&&"function"===typeof t.action.errorCondition&&t.action.errorCondition(r)&&(a=t.action.errorType||"UNSPECIFIED_ERROR"),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),r=e.t0.responseJSON,a=t.action.errorType||"UNSPECIFIED_ERROR",console.error("There was an error fetching: ",r);case 16:return e.next=18,Object(f.c)(w(Object(d.a)({type:a||t.action.type,errorFor:t.action.errorFor||null},c,r),i));case 18:return e.next=20,Object(f.c)(h(!1));case 20:case"end":return e.stop()}},e,null,[[4,11]])}),_=l.a.mark(function e(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(f.d)("GET_API",R);case 3:e.next=8;break;case 5:throw e.prev=5,e.t0=e.catch(0),new Error("There was an error: ",e.t0);case 8:case"end":return e.stop()}},e,null,[[0,5]])}),D=function(e){return{type:"REMOVE_FAVORITE",artist:e}},N=function(e){return{type:"ADD_FAVORITE",artist:e}},C=function(e){return{type:"SET_FAVORITES",favorites:e}},k=l.a.mark(F),I=l.a.mark(V),x=l.a.mark(P);function F(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!sessionStorage||!sessionStorage.reportEvents){e.next=3;break}return e.next=3,Object(f.d)("*",l.a.mark(function e(t){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}},e)}));case 3:case"end":return e.stop()}},k)}function V(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.c)(C(sessionStorage&&sessionStorage.favorites));case 2:case"end":return e.stop()}},I)}function P(){return l.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(f.a)([F(),_(),V()]);case 2:case"end":return e.stop()}},x)}var G=function(e){var t="/api/v1/music/artists/<id>".replace("<id>",e);return{ep:"".concat(v).concat(t),params:{method:"GET"},type:J,container:"response",artistID:e}},L="DATA_RECEIVED",U="ARTISTS_RECEIVED",J="ARTIST_RECEIVED",B={selected:null,entered:"",genres:[],cache:{},artists:[]},M=function(e,t){var n=t.response.data;return Object.assign({},e,{artists:n})},W=function(e,t){var n=t.selected;return e.selected!==n?Object.assign({},e,{selected:n}):e},X=function(e,t){var n=t.value,r=e.cache[n];return Object.assign({},e,{genres:r})},q=function(e,t){var n=t.response.data,r=Object.assign({},e.cache,Object(d.a)({},t.value,n));return Object.assign({},e,{genres:n,cache:r})},z=function(e,t){var n=t.value;return n!==e.entered?Object.assign({},e,{entered:n}):e},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:B,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"TEXT_ENTERED":return z(e,t);case L:return q(e,t);case U:return M(e,t);case"SET_GENRES":return X(e,t);case"SET_SELECTED":return W(e,t);default:return e}},Y={artist:null},H=function(e,t){return Y},Q=function(e,t){var n=t.response.data[0];return Object.assign({},e,{artist:n})},Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Q(e,t);case"CLEAR_ARTIST":return H(e,t);default:return e}},$={favorites:{}},ee=function(e){try{var t=JSON.stringify(e);sessionStorage.favorites=t}catch(n){throw new Error("There was an error saving your favorites: "+n)}},te=function(e,t){var n=t.favorites;if(n){try{n=JSON.parse(n)}catch(r){throw new Error("There was an error getting your favorites: "+r)}return Object.assign({},e,{favorites:n})}return e},ne=function(e,t){var n=t.artist;return e.favorites[n.id]?e:(e.favorites[n.id]=n,ee(e.favorites),Object.assign({},e))},re=function(e,t){var n=t.artist.id;return e.favorites[n]?(delete e.favorites[n],ee(e.favorites),Object.assign({},e)):e},ae=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_FAVORITE":return ne(e,t);case"REMOVE_FAVORITE":return re(e,t);case"SET_FAVORITES":return te(e,t);default:return e}},ce=Object(o.combineReducers)({Search:K,Detail:Z,Saved:ae}),ie=(n(124),n(37)),oe=n(38),se=n(40),ue=n(39),le=n(41),fe=n(25),de=n(110),pe=n(244),me=n(245),ve=n(77),he=n(78),Ee=n.n(he),be=(n(235),function(e){function t(){return Object(ie.a)(this,t),Object(se.a)(this,Object(ue.a)(t).apply(this,arguments))}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"render",value:function(){var e=this.props,t=e.artist,n=e.isFavorite,r=e.handleAddFavorite,c=e.handleRemoveFavorite,i=function(){n?c(t):r(t)};return n?a.a.createElement(me.a,{className:"favorite",title:"I am a favorite",onClick:i,variant:"primary"},a.a.createElement(ve.a,{icon:Ee.a})):a.a.createElement(me.a,{title:"I am a NOT favorite",onClick:i,variant:"primary"},a.a.createElement(ve.a,{icon:Ee.a}))}}]),t}(r.Component)),Oe=function(e,t){return e.Saved.favorites[t.artist.id]},je=Object(i.b)(function(e,t){return{isFavorite:Oe(e,t)}},function(e){return{handleRemoveFavorite:function(t){e(D(t))},handleAddFavorite:function(t){e(N(t))}}})(be),ye=(n(236),function(e){if(e.artist){var t,n=e.artist,r=e.showAllGenres,c=e.handleDetailView,i=n.name,o=n.image,s=n.genres,u=n.id,l=n.popularity,f=null,d=null,p=null,m=s.filter(function(e){return e.is_primary}),v=null;if(m&&m.length&&(v=m[0].name),r)f=s.map(function(e){return e.name}).filter(function(e){return e!==v}).join(", "),d=a.a.createElement(pe.a.Text,null,"Popularity: ",l),p=f?a.a.createElement(pe.a.Text,null,"Additional Genres: ",f):null;return t=c?a.a.createElement(pe.a.Title,null,a.a.createElement(fe.b,{to:"/detail/"+u},a.a.createElement("span",{className:"view",onClick:function(){return c(n.id)}},i))):a.a.createElement(pe.a.Title,null,a.a.createElement("span",{className:"view no-link",onClick:function(){return c(n.id)}},i)),a.a.createElement(pe.a,{key:u},a.a.createElement(pe.a.Img,{variant:"top",src:o}),a.a.createElement(pe.a.Body,null,t,a.a.createElement(pe.a.Text,null,"Primary Genre:",a.a.createElement("br",null),a.a.createElement("span",{className:"primary-genre"},v)),p,d,a.a.createElement(je,{artist:n})))}return null}),ge=(n(238),function(e){function t(e){var n;Object(ie.a)(this,t),n=Object(se.a)(this,Object(ue.a)(t).call(this,e));var r=e.location,a=j(r.search);return a.id&&!n.props.artists.length&&n.props.handleSetSelected(!0,a.id),n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"addSearch",value:function(e){this.props.history.push({pathname:"/",search:"?id=".concat(e)})}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleChange,r=t.genres,c=t.cache,i=t.handleSetSelected,o=t.artists,s=t.handleDetailView,u=t.selectedGenre,l=o&&o.length?o.map(function(e){return a.a.createElement("div",{className:"col",key:e.id},a.a.createElement(ye,{artist:e,handleDetailView:s}))}):null,f=u?a.a.createElement("span",null,"You have selected the ",a.a.createElement("em",null,u)," genre"):null;return a.a.createElement("div",{className:"search col-sm"},a.a.createElement("h1",null,"Search"),a.a.createElement("nav",null,a.a.createElement(fe.b,{className:"favorites-link",to:"/saved"},"View Favorites")),a.a.createElement("div",{className:"search-input"},a.a.createElement("label",null,"Enter a search term"),a.a.createElement(de.a,{labelKey:"name",onChange:function(t){i(t[0],t[0].id),e.addSearch(t[0].id)},onInputChange:function(e){return n(c,e)},options:r,id:"typeAheadID"})),a.a.createElement("div",{className:"selected-genre"},f),a.a.createElement("div",{className:"search-results"},a.a.createElement("div",{className:"artists"},l)))}}]),t}(r.Component)),we=function(e){return e.Search.entered},Se=function(e){return e.Search.cache[e.Search.entered]||[]},Te=function(e){return e.Search.cache},Ae=function(e){return e.Search.artists},Re=function(e){return e.Search.selected&&e.Search.selected.name},_e=Object(i.b)(function(e){return{entered:we(e),genres:Se(e),cache:Te(e),artists:Ae(e),selectedGenre:Re(e)}},function(e){return{handleSetSelected:function(t,n){t&&(e(function(e){return{type:"SET_SELECTED",selected:e}}(t)),e(b(function(e){var t="/api/v1/music/genres/<id>/artists".replace("<id>",e);return{ep:"".concat(v).concat(t),params:{method:"GET"},type:U,container:"response",artistID:e}}(n))))},handleChange:function(t,n){e(function(e){return{type:"TEXT_ENTERED",value:e}}(n)),!function(e,t){return!!e[t]}(t,n)?e(b(function(e){return{ep:"".concat(v).concat("/api/v1/music/genres"),params:{data:{q:e},method:"GET"},type:L,container:"response",value:e}}(n))):e(function(e){return{type:"SET_GENRES",value:e}}(n))},handleDetailView:function(t){e(b(G(t)))}}})(ge),De=function(e){return e.Search.selected},Ne=Object(i.b)(function(e){return{genre:De(e)}},function(e){return{}})(function(e){var t=e.genre,n=t&&t.id,r=n?"/?id="+n:"/";return a.a.createElement(fe.b,{to:r},"Back to Search")}),Ce=(n(239),function(e){function t(e){var n;return Object(ie.a)(this,t),n=Object(se.a)(this,Object(ue.a)(t).call(this,e)),e.match&&e.match.params&&e.match.params.id&&!n.props.artists&&e.handleGetArtist(e.match.params.id),n}return Object(le.a)(t,e),Object(oe.a)(t,[{key:"componentWillUnmount",value:function(){this.props.handleClearArtist()}},{key:"render",value:function(){var e=this.props.artist;return e?a.a.createElement("div",{className:"detail"},a.a.createElement("h1",null,"Details"),a.a.createElement("nav",null,a.a.createElement(Ne,null),"\xa0|\xa0",a.a.createElement(fe.b,{className:"favorites-link",to:"/saved"},"View Favorites")),a.a.createElement("div",{className:"search-results"},a.a.createElement(ye,{artist:e,showAllGenres:!0}))):null}}]),t}(r.Component)),ke=function(e){return e.Detail.artist},Ie=Object(i.b)(function(e){return{artist:ke(e)}},function(e){return{handleGetArtist:function(t){e(b(G(t)))},handleClearArtist:function(){e({type:"CLEAR_ARTIST"})}}})(Ce),xe=(n(240),function(e){return Object.values(function(e){return e.Saved.favorites}(e))}),Fe=Object(i.b)(function(e){return{favoriteArtists:xe(e)}},function(e){return{handleRemoveFavorite:function(t){e(D(t))},handleAddFavorite:function(t){e(N(t))},handleDetailView:function(t){e(b(G(t)))}}})(function(e){var t=e.favoriteArtists,n=e.handleDetailView,r=t.map(function(e){return a.a.createElement(ye,{key:e.id,artist:e,handleDetailView:n})});return a.a.createElement("div",{className:"saved"},a.a.createElement("h1",null,"Favorites"),a.a.createElement("nav",null,a.a.createElement(Ne,null)),a.a.createElement("div",{className:"search-results"},a.a.createElement("div",{className:"artists"},r)))}),Ve=n(32),Pe=(n(241),function(){return a.a.createElement("div",{className:"component"},a.a.createElement(fe.a,{basename:"/"},a.a.createElement(Ve.c,null,a.a.createElement(Ve.a,{path:"/saved",exact:!0,component:Fe}),a.a.createElement(Ve.a,{path:"/detail/:id",exact:!0,component:Ie}),a.a.createElement(Ve.a,{path:"/:id?",exact:!0,component:_e}))))});var Ge=function(){return a.a.createElement("div",{className:"App container"},a.a.createElement(Pe,null))},Le=n(109),Ue=(n(242),Object(s.a)()),Je=Object(o.createStore)(ce,Object(Le.composeWithDevTools)(Object(o.applyMiddleware)(Ue)));Ue.run(P),Object(c.render)(a.a.createElement(i.a,{store:Je},a.a.createElement(Ge,null)),document.getElementById("root"))}},[[114,1,2]]]);
//# sourceMappingURL=main.19c0a1cb.chunk.js.map